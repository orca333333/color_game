<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ìƒ‰ìƒ ë§ì¶”ê¸° ê²Œì„</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 30px; }
    #color-box { width: 50px; height: 80px; margin: 20px auto; border: 1px solid #000; display: inline-block; }
    input { margin: 5px; }
    .rgb-inputs { display: flex; justify-content: center; margin-top: 10px; }
    .rgb-inputs input { margin: 5px; }
    #result { margin-top: 10px; }
    .button { padding: 10px 20px; margin-top: 20px; cursor: pointer; background-color: #4CAF50; color: white; border: none; }
    .button:hover { background-color: #45a049; }
  </style>
</head>
<body>
  <h1>ğŸ¨ ìƒ‰ìƒ ë§ì¶”ê¸° ê²Œì„</h1>
  <div id="color-box"></div>
  <p>RGB ê°’ì„ ì…ë ¥í•´ë³´ì„¸ìš”! (0~255)</p>
  <div class="rgb-inputs">
    <input type="number" id="r" placeholder="R" min="0" max="255">
    <input type="number" id="g" placeholder="G" min="0" max="255">
    <input type="number" id="b" placeholder="B" min="0" max="255">
  </div>
  <button class="button" onclick="checkAnswer()">ì œì¶œ</button>
  <p id="result"></p>
  <button class="button" onclick="newQuestion()">ë‹¤ì‹œí•˜ê¸°</button>
  <script>
    let answerColor = { r: 0, g: 0, b: 0 };

    function getRandomColor() {
      const r = Math.floor(Math.random() * 256);
      const g = Math.floor(Math.random() * 256);
      const b = Math.floor(Math.random() * 256);
      return { r, g, b };
    }

    function showColorBox(color) {
      const box = document.getElementById("color-box");
      box.style.backgroundColor = `rgb(${color.r}, ${color.g}, ${color.b})`;
    }

    function calculateSimilarity(userColor, correctColor) {
      const diffR = Math.abs(userColor.r - correctColor.r);
      const diffG = Math.abs(userColor.g - correctColor.g);
      const diffB = Math.abs(userColor.b - correctColor.b);

      // ìœ ì‚¬ë„ë¥¼ 0~100%ë¡œ ê³„ì‚° (ë‹¨ê³„ë³„ ì°¨ì´ ê³„ì‚°)
      const maxDiff = 255 * 3; // ìµœëŒ€ ì°¨ì´ëŠ” 255ì˜ 3ë°° (RGB ì´í•©)
      const diff = diffR + diffG + diffB;
      const similarity = Math.max(0, 100 - (diff / maxDiff) * 100);  // ë¹„ìœ¨ë¡œ ìœ ì‚¬ë„ ê³„ì‚°
      return similarity;
    }

    function newQuestion() {
      answerColor = getRandomColor();
      showColorBox(answerColor);
      document.getElementById("result").textContent = "";
      document.getElementById("r").value = "";
      document.getElementById("g").value = "";
      document.getElementById("b").value = "";
    }

    function checkAnswer() {
      const userR = parseInt(document.getElementById("r").value);
      const userG = parseInt(document.getElementById("g").value);
      const userB = parseInt(document.getElementById("b").value);

      if (
        userR < 0 || userR > 255 ||
        userG < 0 || userG > 255 ||
        userB < 0 || userB > 255
      ) {
        document.getElementById("result").textContent = "RGB ê°’ì€ 0~255 ì‚¬ì´ë¡œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤!";
        return;
      }

      const userColor = { r: userR, g: userG, b: userB };
      const similarity = calculateSimilarity(userColor, answerColor);

      // ìœ ì‚¬ë„ ê³„ì‚° í›„ ê²°ê³¼ í‘œì‹œ
      document.getElementById("result").textContent = `ìœ ì‚¬ë„: ${similarity.toFixed(2)}% | ì •ë‹µ RGB: (${answerColor.r}, ${answerColor.g}, ${answerColor.b})`;
    }

    newQuestion(); // ì²« ë¬¸ì œ ì‹œì‘
  </script>
</body>
</html>
